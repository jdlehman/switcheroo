var switcheroo=function(e){"use strict";function t(e){var t=decodeURI(window.location[e].slice(1).split("?")[0]);return"/"!==t.charAt(0)?"/"+t:t}function n(e){return"/"===e?e:"/"!==e.slice(-1)?e:e.slice(0,-1)}function r(e){return e.replace(/\/:[^\/]+/g,"/([^/]+)")}function o(e){return(e.match(/:[^\/]+/g)||[]).map(function(e){return e.substr(1)})}function a(e,t){return r(n(e+t)+"/?")}function i(e){return new RegExp("^("+e.join("|")+")$")}function s(t,r){var o=r.children,s=r.basePath,p=n(t);return e.Children.toArray(o).filter(function(e){return i([].concat(e.props.path).map(function(e){return a(s,e)})).test(p)})[0]||null}function p(e,t,r){if(!r)return null;var o=n(e);return[].concat(r.props.path).filter(function(e){var n=a(t,e);return new RegExp("^"+n+"$").test(o)})[0]||null}function h(e,t,r){var i={},s=n(e);return r&&[].concat(r.props.path).forEach(function(e){var n=o(t+e),r=a(t,e),p=s.match(new RegExp("^"+r+"$"));p&&(p.shift(),n.forEach(function(e,t){i[e]=p[t]}))}),i}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f="default"in e?e.default:e,d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=function(e){function n(e){c(this,n);var r=u(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));w.call(r);var o=t(e.location),a=s(o,e),i=p(o,e.basePath,a),l=h(o,e.basePath,a);return r.state={visibleSwitch:a,dynamicValues:l,activePath:i},r}return l(n,e),y(n,[{key:"componentDidMount",value:function(){this.props.load&&window.addEventListener("load",this.handleRouteChange),this.props.pushState&&window.addEventListener("popstate",this.handleRouteChange),this.props.hashChange&&window.addEventListener("hashchange",this.handleRouteChange)}},{key:"componentWillReceiveProps",value:function(e){this.handleSwitchChange(e)}},{key:"shouldComponentUpdate",value:function(e){return!e.preventUpdate()}},{key:"componentWillUnmount",value:function(){this.props.load&&window.removeEventListener("load",this.handleRouteChange),this.props.pushState&&window.removeEventListener("popstate",this.handleRouteChange),this.props.hashChange&&window.removeEventListener("hashchange",this.handleRouteChange)}},{key:"render",value:function(){var e=this.state.visibleSwitch||{},t=e.props,r=this.state.visibleSwitch&&f.cloneElement(this.state.visibleSwitch,d({},t,this.props.mapDynamicSegments(this.state.dynamicValues),{activePath:this.state.activePath}));if(this.props.renderSwitch)return this.props.renderSwitch(r,this.state.dynamicValues,this.state.activePath);if(this.props.wrapper){var o=d({},this.props);return Object.keys(n.propTypes).forEach(function(e){return delete o[e]}),f.createElement(this.props.wrapper,o,r)}return r}}]),n}(e.Component);v.displayName="Switcher",v.propTypes={children:e.PropTypes.oneOfType([e.PropTypes.arrayOf(e.PropTypes.node),e.PropTypes.node]),pushState:e.PropTypes.bool,hashChange:e.PropTypes.bool,load:e.PropTypes.bool,onChange:e.PropTypes.func,wrapper:e.PropTypes.any,location:e.PropTypes.string,basePath:e.PropTypes.string,preventUpdate:e.PropTypes.func,mapDynamicSegments:e.PropTypes.func,renderSwitch:e.PropTypes.func},v.defaultProps={pushState:!1,hashChange:!0,load:!0,location:"hash",basePath:"",preventUpdate:function(){return!1},mapDynamicSegments:function(e){return e}};var w=function(){var e=this;this.handleSwitchChange=function(n){var r=t(n.location),o=s(r,n),a=p(r,n.basePath,o),i=h(r,n.basePath,o);"function"==typeof n.onChange&&n.onChange(!!o,r,i,a),e.setState({visibleSwitch:o,dynamicValues:i,activePath:a})},this.handleRouteChange=function(t){e.handleSwitchChange(e.props)}};return v}(React);
