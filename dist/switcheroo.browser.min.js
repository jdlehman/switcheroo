var switcheroo=function(e){"use strict";function t(e){var t=decodeURI(window.location[e].slice(1).split("?")[0]);return"/"!==t.charAt(0)?"/"+t:t}function n(e){return"/"===e?e:"/"!==e.slice(-1)?e:e.slice(0,-1)}function r(e){return e.replace(/\/:[^\/]+/g,"/([^/]+)")}function o(e){var t=e.match(/:[^\/]+/g)||[];return t.map(function(e){return e.substr(1)})}function a(e,t){return r(n(e+t)+"/?")}function i(e){return new RegExp("^("+e.join("|")+")$")}function s(t,r){var o=r.children,s=r.basePath,p=n(t),c=e.Children.toArray(o);return c.filter(function(e){var t=[].concat(e.props.path).map(function(e){return a(s,e)}),n=i(t);return n.test(p)})[0]||null}function p(e,t,r){if(!r)return null;var o=n(e),i=[].concat(r.props.path);return i.filter(function(e){var n=a(t,e),r=new RegExp("^"+n+"$");return r.test(o)})[0]||null}function c(e,t,r){var i={},s=n(e);return r&&[].concat(r.props.path).forEach(function(e){var n=o(t+e),r=a(t,e),p=s.match(new RegExp("^"+r+"$"));p&&(p.shift(),n.forEach(function(e,t){i[e]=p[t]}))}),i}var u="default"in e?e.default:e,h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},l=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},v=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},b=function(e){function n(e){l(this,n);var r=v(this,Object.getPrototypeOf(n).call(this,e));w.call(r);var o=t(e.location),a=s(o,e),i=p(o,e.basePath,a),u=c(o,e.basePath,a);return r.state={visibleSwitch:a,dynamicValues:u,activePath:i},r}return y(n,e),f(n,[{key:"componentDidMount",value:function(){this.props.load&&window.addEventListener("load",this.handleRouteChange),this.props.pushState&&window.addEventListener("popstate",this.handleRouteChange),this.props.hashChange&&window.addEventListener("hashchange",this.handleRouteChange)}},{key:"componentWillReceiveProps",value:function(e){this.handleSwitchChange(e)}},{key:"shouldComponentUpdate",value:function(e){return!e.preventUpdate()}},{key:"componentWillUnmount",value:function(){this.props.load&&window.removeEventListener("load",this.handleRouteChange),this.props.pushState&&window.removeEventListener("popstate",this.handleRouteChange),this.props.hashChange&&window.removeEventListener("hashchange",this.handleRouteChange)}},{key:"render",value:function(){var e=this,t=this.state.visibleSwitch||{},r=t.props,o=this.state.visibleSwitch&&u.cloneElement(this.state.visibleSwitch,d({},r,this.props.mapDynamicSegments(this.state.dynamicValues),{activePath:this.state.activePath}));if(this.props.renderSwitch)return this.props.renderSwitch(o,this.state.dynamicValues,this.state.activePath);if(!this.props.wrapper)return o;var a=function(){var t=d({},e.props);return Object.keys(n.propTypes).forEach(function(e){return delete t[e]}),{v:u.createElement(e.props.wrapper,t,o)}}();return"object"===("undefined"==typeof a?"undefined":h(a))?a.v:void 0}}]),n}(e.Component);b.displayName="Switcher",b.propTypes={children:e.PropTypes.oneOfType([e.PropTypes.arrayOf(e.PropTypes.node),e.PropTypes.node]),pushState:e.PropTypes.bool,hashChange:e.PropTypes.bool,load:e.PropTypes.bool,onChange:e.PropTypes.func,wrapper:e.PropTypes.any,location:e.PropTypes.string,basePath:e.PropTypes.string,preventUpdate:e.PropTypes.func,mapDynamicSegments:e.PropTypes.func,renderSwitch:e.PropTypes.func},b.defaultProps={pushState:!1,hashChange:!0,load:!0,location:"hash",basePath:"",preventUpdate:function(){return!1},mapDynamicSegments:function(e){return e}};var w=function(){var e=this;this.handleSwitchChange=function(n){var r=t(n.location),o=s(r,n),a=p(r,n.basePath,o),i=c(r,n.basePath,o);"function"==typeof n.onChange&&n.onChange(!!o,r,i,a),e.setState({visibleSwitch:o,dynamicValues:i,activePath:a})},this.handleRouteChange=function(t){e.handleSwitchChange(e.props)}};return b}(React);
