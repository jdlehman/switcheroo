!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("window")):"function"==typeof define&&define.amd?define(["react","window"],t):"object"==typeof exports?exports.switcheroo=t(require("react"),require("window")):e.switcheroo=t(e.React,e.window)}(this,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";t.Switcher=n(3),t.Switch=n(2)},function(t,n,r){t.exports=e},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{"default":e}},o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),u=r(s),h=function(e){function t(){o(this,t),null!=e&&e.apply(this,arguments)}return i(t,e),a(t,[{key:"componentDidMount",value:function(){"function"==typeof this.props.onShow&&this.props.onShow()}},{key:"componentWillUnmount",value:function(){"function"==typeof this.props.onHide&&this.props.onHide()}},{key:"render",value:function(){return u["default"].createElement(this.props.handler,this.props.handlerProps)}}]),t}(s.Component);t["default"]=h,h.displayName="Switch",h.propTypes={path:u["default"].PropTypes.string.isRequired,handler:u["default"].PropTypes.func.isRequired,handlerProps:u["default"].PropTypes.object,onShow:u["default"].PropTypes.func,onHide:u["default"].PropTypes.func},e.exports=t["default"]},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{"default":e}},o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function y(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:y(o,t,n)}if("value"in r)return r.value;var a=r.get;return void 0===a?void 0:a.call(n)},s=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)};Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),h=r(u),p=n(4),c=r(p),l=n(7),f=r(l),d=function(e){function t(e){var n=this;o(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.getLocation=this.getLocation.bind(this),this.handleRouteChange=this.handleRouteChange.bind(this),this.getSwitch=this.getSwitch.bind(this),this.defaultSwitch=this.props.defaultHandler?h["default"].createElement(this.props.defaultHandler,this.props.defaultHandlerProps):null,this.recognizer=new c["default"];var r=[].concat(this.props.children);r.forEach(function(e){n.recognizer.add([{path:""+n.props.basePath+e.props.path,handler:e.props.handler||e}])}),this.state={visibleSwitch:null}}return s(t,e),a(t,[{key:"componentDidMount",value:function(){this.props.load&&f["default"].addEventListener("load",this.handleRouteChange),this.props.pushState&&f["default"].addEventListener("popstate",this.handleRouteChange),this.props.hashChange&&f["default"].addEventListener("hashchange",this.handleRouteChange)}},{key:"componentWillUnmount",value:function(){this.props.load&&f["default"].removeEventListener("load",this.handleRouteChange),this.props.pushState&&f["default"].removeEventListener("popstate",this.handleRouteChange),this.props.hashChange&&f["default"].removeEventListener("hashchange",this.handleRouteChange)}},{key:"getLocation",value:function(){var e=decodeURI(f["default"].location[this.props.location].slice(1).split("?")[0]);return"/"!==e.charAt(0)?"/"+e:e}},{key:"getSwitch",value:function(e){var t=this.recognizer.recognize(e);return t&&t[0]&&t[0].handler}},{key:"handleRouteChange",value:function(e){var t=this.getLocation(),n=this.getSwitch(t);"function"==typeof this.props.onChange&&this.props.onChange(!!n,t),this.setState({visibleSwitch:n})}},{key:"render",value:function(){return this.props.wrapper?h["default"].createElement(this.props.wrapper,this.props,this.state.visibleSwitch||this.defaultSwitch):this.state.visibleSwitch||this.defaultSwitch}}]),t}(u.Component);t["default"]=d,d.displayName="Switcher",d.propTypes={children:h["default"].PropTypes.oneOfType([h["default"].PropTypes.arrayOf(h["default"].PropTypes.element),h["default"].PropTypes.element]).isRequired,pushState:h["default"].PropTypes.bool,hashChange:h["default"].PropTypes.bool,load:h["default"].PropTypes.bool,defaultHandler:h["default"].PropTypes.func,defaultHandlerProps:h["default"].PropTypes.object,onChange:h["default"].PropTypes.func,wrapper:h["default"].PropTypes.any,location:h["default"].PropTypes.string,baseURL:h["default"].PropTypes.string},d.defaultProps={pushState:!1,hashChange:!0,load:!0,location:"hash",basePath:""},e.exports=t["default"]},function(e,t,n){var r;(function(e){(function(){"use strict";function o(e,t,n){this.path=e,this.matcher=t,this.delegate=n}function a(e){this.routes={},this.children={},this.target=e}function i(e,t,n){return function(r,a){var s=e+r;return a?void a(i(s,t,n)):new o(e+r,t,n)}}function s(e,t,n){for(var r=0,o=0,a=e.length;a>o;o++)r+=e[o].path.length;t=t.substr(r);var i={path:t,handler:n};e.push(i)}function u(e,t,n,r){var o=t.routes;for(var a in o)if(o.hasOwnProperty(a)){var i=e.slice();s(i,a,o[a]),t.children[a]?u(i,t.children[a],n,r):n.call(r,i)}}function h(e){return"[object Array]"===Object.prototype.toString.call(e)}function p(e){this.string=e}function c(e){this.name=e}function l(e){this.name=e}function f(){}function d(e,t,n){"/"===e.charAt(0)&&(e=e.substr(1));for(var r=e.split("/"),o=[],a=0,i=r.length;i>a;a++){var s,u=r[a];(s=u.match(/^:([^\/]+)$/))?(o.push(new c(s[1])),t.push(s[1]),n.dynamics++):(s=u.match(/^\*([^\/]+)$/))?(o.push(new l(s[1])),t.push(s[1]),n.stars++):""===u?o.push(new f):(o.push(new p(u)),n.statics++)}return o}function y(e){this.charSpec=e,this.nextStates=[]}function v(e){return e.sort(function(e,t){if(e.types.stars!==t.types.stars)return e.types.stars-t.types.stars;if(e.types.stars){if(e.types.statics!==t.types.statics)return t.types.statics-e.types.statics;if(e.types.dynamics!==t.types.dynamics)return t.types.dynamics-e.types.dynamics}return e.types.dynamics!==t.types.dynamics?e.types.dynamics-t.types.dynamics:e.types.statics!==t.types.statics?t.types.statics-e.types.statics:0})}function g(e,t){for(var n=[],r=0,o=e.length;o>r;r++){var a=e[r];n=n.concat(a.match(t))}return n}function m(e){this.queryParams=e||{}}function w(e,t,n){for(var r=e.handlers,o=e.regex,a=t.match(o),i=1,s=new m(n),u=0,h=r.length;h>u;u++){for(var p=r[u],c=p.names,l={},f=0,d=c.length;d>f;f++)l[c[f]]=a[i++];s.push({handler:p.handler,params:l,isDynamic:!!c.length})}return s}function b(e,t){return t.eachChar(function(t){e=e.put(t)}),e}function S(e){return e=e.replace(/\+/gm,"%20"),decodeURIComponent(e)}o.prototype={to:function(e,t){var n=this.delegate;if(n&&n.willAddRoute&&(e=n.willAddRoute(this.matcher.target,e)),this.matcher.add(this.path,e),t){if(0===t.length)throw new Error("You must have an argument in the function passed to `to`");this.matcher.addChild(this.path,e,t,this.delegate)}return this}},a.prototype={add:function(e,t){this.routes[e]=t},addChild:function(e,t,n,r){var o=new a(t);this.children[e]=o;var s=i(e,o,r);r&&r.contextEntered&&r.contextEntered(t,s),n(s)}};var C=function(e,t){var n=new a;e(i("",n,this.delegate)),u([],n,function(e){t?t(this,e):this.add(e)},this)},x=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],P=new RegExp("(\\"+x.join("|\\")+")","g");p.prototype={eachChar:function(e){for(var t,n=this.string,r=0,o=n.length;o>r;r++)t=n.charAt(r),e({validChars:t})},regex:function(){return this.string.replace(P,"\\$1")},generate:function(){return this.string}},c.prototype={eachChar:function(e){e({invalidChars:"/",repeat:!0})},regex:function(){return"([^/]+)"},generate:function(e){return e[this.name]}},l.prototype={eachChar:function(e){e({invalidChars:"",repeat:!0})},regex:function(){return"(.+)"},generate:function(e){return e[this.name]}},f.prototype={eachChar:function(){},regex:function(){return""},generate:function(){return""}},y.prototype={get:function(e){for(var t=this.nextStates,n=0,r=t.length;r>n;n++){var o=t[n],a=o.charSpec.validChars===e.validChars;if(a=a&&o.charSpec.invalidChars===e.invalidChars)return o}},put:function(e){var t;return(t=this.get(e))?t:(t=new y(e),this.nextStates.push(t),e.repeat&&t.nextStates.push(t),t)},match:function(e){for(var t,n,r,o=this.nextStates,a=[],i=0,s=o.length;s>i;i++)t=o[i],n=t.charSpec,"undefined"!=typeof(r=n.validChars)?-1!==r.indexOf(e)&&a.push(t):"undefined"!=typeof(r=n.invalidChars)&&-1===r.indexOf(e)&&a.push(t);return a}};var R=Object.create||function(e){function t(){}return t.prototype=e,new t};m.prototype=R({splice:Array.prototype.splice,slice:Array.prototype.slice,push:Array.prototype.push,length:0,queryParams:null});var T=function(){this.rootState=new y,this.names={}};T.prototype={add:function(e,t){for(var n,r=this.rootState,o="^",a={statics:0,dynamics:0,stars:0},i=[],s=[],u=!0,h=0,p=e.length;p>h;h++){var c=e[h],l=[],y=d(c.path,l,a);s=s.concat(y);for(var v=0,g=y.length;g>v;v++){var m=y[v];m instanceof f||(u=!1,r=r.put({validChars:"/"}),o+="/",r=b(r,m),o+=m.regex())}var w={handler:c.handler,names:l};i.push(w)}u&&(r=r.put({validChars:"/"}),o+="/"),r.handlers=i,r.regex=new RegExp(o+"$"),r.types=a,(n=t&&t.as)&&(this.names[n]={segments:s,handlers:i})},handlersFor:function(e){var t=this.names[e],n=[];if(!t)throw new Error("There is no route named "+e);for(var r=0,o=t.handlers.length;o>r;r++)n.push(t.handlers[r]);return n},hasRoute:function(e){return!!this.names[e]},generate:function(e,t){var n=this.names[e],r="";if(!n)throw new Error("There is no route named "+e);for(var o=n.segments,a=0,i=o.length;i>a;a++){var s=o[a];s instanceof f||(r+="/",r+=s.generate(t))}return"/"!==r.charAt(0)&&(r="/"+r),t&&t.queryParams&&(r+=this.generateQueryString(t.queryParams,n.handlers)),r},generateQueryString:function(e,t){var n=[],r=[];for(var o in e)e.hasOwnProperty(o)&&r.push(o);r.sort();for(var a=0,i=r.length;i>a;a++){o=r[a];var s=e[o];if(null!=s){var u=encodeURIComponent(o);if(h(s))for(var p=0,c=s.length;c>p;p++){var l=o+"[]="+encodeURIComponent(s[p]);n.push(l)}else u+="="+encodeURIComponent(s),n.push(u)}}return 0===n.length?"":"?"+n.join("&")},parseQueryString:function(e){for(var t=e.split("&"),n={},r=0;r<t.length;r++){var o,a=t[r].split("="),i=S(a[0]),s=i.length,u=!1;1===a.length?o="true":(s>2&&"[]"===i.slice(s-2)&&(u=!0,i=i.slice(0,s-2),n[i]||(n[i]=[])),o=a[1]?S(a[1]):""),u?n[i].push(o):n[i]=o}return n},recognize:function(e){var t,n,r,o,a=[this.rootState],i={},s=!1;if(o=e.indexOf("?"),-1!==o){var u=e.substr(o+1,e.length);e=e.substr(0,o),i=this.parseQueryString(u)}for(e=decodeURI(e),"/"!==e.charAt(0)&&(e="/"+e),t=e.length,t>1&&"/"===e.charAt(t-1)&&(e=e.substr(0,t-1),s=!0),n=0,r=e.length;r>n&&(a=g(a,e.charAt(n)),a.length);n++);var h=[];for(n=0,r=a.length;r>n;n++)a[n].handlers&&h.push(a[n]);a=v(h);var p=h[0];return p&&p.handlers?(s&&"(.+)$"===p.regex.source.slice(-5)&&(e+="/"),w(p,e,i)):void 0}},T.prototype.map=C,T.VERSION="0.1.5";var E=T;n(5).amd?(r=function(){return E}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))):"undefined"!=typeof e&&e.exports?e.exports=E:"undefined"!=typeof this&&(this.RouteRecognizer=E)}).call(this)}).call(t,n(6)(e))},function(e,t,n){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,n,r){e.exports=t}])});