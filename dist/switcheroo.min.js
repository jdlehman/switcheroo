!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("window"),require("react")):"function"==typeof define&&define.amd?define(["window","react"],e):"object"==typeof exports?exports.switcheroo=e(require("window"),require("react")):t.switcheroo=e(t.window,t.React)}(this,function(t,e){return function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";e.Switcher=n(1)},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{"default":t}},a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function y(t,e,n){var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:y(a,e,n)}if("value"in r)return r.value;var o=r.get;return void 0===o?void 0:o.call(n)},s=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)};Object.defineProperty(e,"__esModule",{value:!0});var h=n(6),u=r(h),c=n(2),p=r(c),l=n(5),f=r(l),d=function(t){function e(t){var n=this;a(this,e),i(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.getLocation=this.getLocation.bind(this),this.handleRouteChange=this.handleRouteChange.bind(this),this.getSwitch=this.getSwitch.bind(this),this.defaultSwitch=this.props.defaultHandler?u["default"].createElement(this.props.defaultHandler,this.props.defaultHandlerProps):null,this.recognizer=new p["default"];var r=[].concat(this.props.children);r.forEach(function(t){n.recognizer.add([{path:""+n.props.basePath+t.props.path,handler:t.props.handler||t}])}),this.state={visibleSwitch:null}}return s(e,t),o(e,[{key:"componentDidMount",value:function(){this.props.load&&f["default"].addEventListener("load",this.handleRouteChange),this.props.pushState&&f["default"].addEventListener("popstate",this.handleRouteChange),this.props.hashChange&&f["default"].addEventListener("hashchange",this.handleRouteChange)}},{key:"componentWillUnmount",value:function(){this.props.load&&f["default"].removeEventListener("load",this.handleRouteChange),this.props.pushState&&f["default"].removeEventListener("popstate",this.handleRouteChange),this.props.hashChange&&f["default"].removeEventListener("hashchange",this.handleRouteChange)}},{key:"getLocation",value:function(){var t=decodeURI(f["default"].location[this.props.location].slice(1).split("?")[0]);return"/"!==t.charAt(0)?"/"+t:t}},{key:"getSwitch",value:function(t){var e=this.recognizer.recognize(t);return e&&e[0]&&e[0].handler}},{key:"handleRouteChange",value:function(t){var e=this.getLocation(),n=this.getSwitch(e);"function"==typeof this.props.onChange&&this.props.onChange(!!n,e),this.setState({visibleSwitch:n})}},{key:"render",value:function(){return this.props.wrapper?u["default"].createElement(this.props.wrapper,this.props,this.state.visibleSwitch||this.defaultSwitch):this.state.visibleSwitch||this.defaultSwitch}}]),e}(h.Component);e["default"]=d,d.displayName="Switcher",d.propTypes={children:u["default"].PropTypes.oneOfType([u["default"].PropTypes.arrayOf(u["default"].PropTypes.element),u["default"].PropTypes.element]).isRequired,pushState:u["default"].PropTypes.bool,hashChange:u["default"].PropTypes.bool,load:u["default"].PropTypes.bool,defaultHandler:u["default"].PropTypes.func,defaultHandlerProps:u["default"].PropTypes.object,onChange:u["default"].PropTypes.func,wrapper:u["default"].PropTypes.any,location:u["default"].PropTypes.string,baseURL:u["default"].PropTypes.string},d.defaultProps={pushState:!1,hashChange:!0,load:!0,location:"hash",basePath:""},t.exports=e["default"]},function(t,e,n){var r;(function(t){(function(){"use strict";function a(t,e,n){this.path=t,this.matcher=e,this.delegate=n}function o(t){this.routes={},this.children={},this.target=t}function i(t,e,n){return function(r,o){var s=t+r;return o?void o(i(s,e,n)):new a(t+r,e,n)}}function s(t,e,n){for(var r=0,a=0,o=t.length;o>a;a++)r+=t[a].path.length;e=e.substr(r);var i={path:e,handler:n};t.push(i)}function h(t,e,n,r){var a=e.routes;for(var o in a)if(a.hasOwnProperty(o)){var i=t.slice();s(i,o,a[o]),e.children[o]?h(i,e.children[o],n,r):n.call(r,i)}}function u(t){return"[object Array]"===Object.prototype.toString.call(t)}function c(t){this.string=t}function p(t){this.name=t}function l(t){this.name=t}function f(){}function d(t,e,n){"/"===t.charAt(0)&&(t=t.substr(1));for(var r=t.split("/"),a=[],o=0,i=r.length;i>o;o++){var s,h=r[o];(s=h.match(/^:([^\/]+)$/))?(a.push(new p(s[1])),e.push(s[1]),n.dynamics++):(s=h.match(/^\*([^\/]+)$/))?(a.push(new l(s[1])),e.push(s[1]),n.stars++):""===h?a.push(new f):(a.push(new c(h)),n.statics++)}return a}function y(t){this.charSpec=t,this.nextStates=[]}function g(t){return t.sort(function(t,e){if(t.types.stars!==e.types.stars)return t.types.stars-e.types.stars;if(t.types.stars){if(t.types.statics!==e.types.statics)return e.types.statics-t.types.statics;if(t.types.dynamics!==e.types.dynamics)return e.types.dynamics-t.types.dynamics}return t.types.dynamics!==e.types.dynamics?t.types.dynamics-e.types.dynamics:t.types.statics!==e.types.statics?e.types.statics-t.types.statics:0})}function v(t,e){for(var n=[],r=0,a=t.length;a>r;r++){var o=t[r];n=n.concat(o.match(e))}return n}function m(t){this.queryParams=t||{}}function w(t,e,n){for(var r=t.handlers,a=t.regex,o=e.match(a),i=1,s=new m(n),h=0,u=r.length;u>h;h++){for(var c=r[h],p=c.names,l={},f=0,d=p.length;d>f;f++)l[p[f]]=o[i++];s.push({handler:c.handler,params:l,isDynamic:!!p.length})}return s}function b(t,e){return e.eachChar(function(e){t=t.put(e)}),t}function C(t){return t=t.replace(/\+/gm,"%20"),decodeURIComponent(t)}a.prototype={to:function(t,e){var n=this.delegate;if(n&&n.willAddRoute&&(t=n.willAddRoute(this.matcher.target,t)),this.matcher.add(this.path,t),e){if(0===e.length)throw new Error("You must have an argument in the function passed to `to`");this.matcher.addChild(this.path,t,e,this.delegate)}return this}},o.prototype={add:function(t,e){this.routes[t]=e},addChild:function(t,e,n,r){var a=new o(e);this.children[t]=a;var s=i(t,a,r);r&&r.contextEntered&&r.contextEntered(e,s),n(s)}};var x=function(t,e){var n=new o;t(i("",n,this.delegate)),h([],n,function(t){e?e(this,t):this.add(t)},this)},S=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],P=new RegExp("(\\"+S.join("|\\")+")","g");c.prototype={eachChar:function(t){for(var e,n=this.string,r=0,a=n.length;a>r;r++)e=n.charAt(r),t({validChars:e})},regex:function(){return this.string.replace(P,"\\$1")},generate:function(){return this.string}},p.prototype={eachChar:function(t){t({invalidChars:"/",repeat:!0})},regex:function(){return"([^/]+)"},generate:function(t){return t[this.name]}},l.prototype={eachChar:function(t){t({invalidChars:"",repeat:!0})},regex:function(){return"(.+)"},generate:function(t){return t[this.name]}},f.prototype={eachChar:function(){},regex:function(){return""},generate:function(){return""}},y.prototype={get:function(t){for(var e=this.nextStates,n=0,r=e.length;r>n;n++){var a=e[n],o=a.charSpec.validChars===t.validChars;if(o=o&&a.charSpec.invalidChars===t.invalidChars)return a}},put:function(t){var e;return(e=this.get(t))?e:(e=new y(t),this.nextStates.push(e),t.repeat&&e.nextStates.push(e),e)},match:function(t){for(var e,n,r,a=this.nextStates,o=[],i=0,s=a.length;s>i;i++)e=a[i],n=e.charSpec,"undefined"!=typeof(r=n.validChars)?-1!==r.indexOf(t)&&o.push(e):"undefined"!=typeof(r=n.invalidChars)&&-1===r.indexOf(t)&&o.push(e);return o}};var R=Object.create||function(t){function e(){}return e.prototype=t,new e};m.prototype=R({splice:Array.prototype.splice,slice:Array.prototype.slice,push:Array.prototype.push,length:0,queryParams:null});var E=function(){this.rootState=new y,this.names={}};E.prototype={add:function(t,e){for(var n,r=this.rootState,a="^",o={statics:0,dynamics:0,stars:0},i=[],s=[],h=!0,u=0,c=t.length;c>u;u++){var p=t[u],l=[],y=d(p.path,l,o);s=s.concat(y);for(var g=0,v=y.length;v>g;g++){var m=y[g];m instanceof f||(h=!1,r=r.put({validChars:"/"}),a+="/",r=b(r,m),a+=m.regex())}var w={handler:p.handler,names:l};i.push(w)}h&&(r=r.put({validChars:"/"}),a+="/"),r.handlers=i,r.regex=new RegExp(a+"$"),r.types=o,(n=e&&e.as)&&(this.names[n]={segments:s,handlers:i})},handlersFor:function(t){var e=this.names[t],n=[];if(!e)throw new Error("There is no route named "+t);for(var r=0,a=e.handlers.length;a>r;r++)n.push(e.handlers[r]);return n},hasRoute:function(t){return!!this.names[t]},generate:function(t,e){var n=this.names[t],r="";if(!n)throw new Error("There is no route named "+t);for(var a=n.segments,o=0,i=a.length;i>o;o++){var s=a[o];s instanceof f||(r+="/",r+=s.generate(e))}return"/"!==r.charAt(0)&&(r="/"+r),e&&e.queryParams&&(r+=this.generateQueryString(e.queryParams,n.handlers)),r},generateQueryString:function(t,e){var n=[],r=[];for(var a in t)t.hasOwnProperty(a)&&r.push(a);r.sort();for(var o=0,i=r.length;i>o;o++){a=r[o];var s=t[a];if(null!=s){var h=encodeURIComponent(a);if(u(s))for(var c=0,p=s.length;p>c;c++){var l=a+"[]="+encodeURIComponent(s[c]);n.push(l)}else h+="="+encodeURIComponent(s),n.push(h)}}return 0===n.length?"":"?"+n.join("&")},parseQueryString:function(t){for(var e=t.split("&"),n={},r=0;r<e.length;r++){var a,o=e[r].split("="),i=C(o[0]),s=i.length,h=!1;1===o.length?a="true":(s>2&&"[]"===i.slice(s-2)&&(h=!0,i=i.slice(0,s-2),n[i]||(n[i]=[])),a=o[1]?C(o[1]):""),h?n[i].push(a):n[i]=a}return n},recognize:function(t){var e,n,r,a,o=[this.rootState],i={},s=!1;if(a=t.indexOf("?"),-1!==a){var h=t.substr(a+1,t.length);t=t.substr(0,a),i=this.parseQueryString(h)}for(t=decodeURI(t),"/"!==t.charAt(0)&&(t="/"+t),e=t.length,e>1&&"/"===t.charAt(e-1)&&(t=t.substr(0,e-1),s=!0),n=0,r=t.length;r>n&&(o=v(o,t.charAt(n)),o.length);n++);var u=[];for(n=0,r=o.length;r>n;n++)o[n].handlers&&u.push(o[n]);o=g(u);var c=u[0];return c&&c.handlers?(s&&"(.+)$"===c.regex.source.slice(-5)&&(t+="/"),w(c,t,i)):void 0}},E.prototype.map=x,E.VERSION="0.1.5";var O=E;n(3).amd?(r=function(){return O}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))):"undefined"!=typeof t&&t.exports?t.exports=O:"undefined"!=typeof this&&(this.RouteRecognizer=O)}).call(this)}).call(e,n(4)(t))},function(t,e,n){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,n){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(e,n,r){e.exports=t},function(t,n,r){t.exports=e}])});