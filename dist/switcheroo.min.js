!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("window"),require("react")):"function"==typeof define&&define.amd?define(["window","react"],t):"object"==typeof exports?exports.switcheroo=t(require("window"),require("react")):e.switcheroo=t(e.window,e.React)}(this,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";t.Switcher=n(1)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){s=h=u=void 0,r=!1;var a=e,i=t,o=n,s=Object.getOwnPropertyDescriptor(a,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(o)}var h=Object.getPrototypeOf(a);if(null===h)return void 0;e=h,t=i,n=o,r=!0}},u=n(6),h=r(u),c=n(2),p=r(c),l=n(5),f=r(l),d=function(e){function t(e){var n=this;a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.initializeRecognizer=function(e){n.recognizer=new p["default"];var t=[].concat(e.children);t.forEach(function(t){n.recognizer.add([{path:""+e.basePath+t.props.path,handler:t.props.handler||t}])})},this.getLocation=function(){var e=decodeURI(f["default"].location[n.props.location].slice(1).split("?")[0]);return"/"!==e.charAt(0)?"/"+e:e},this.getSwitch=function(e){var t=n.recognizer.recognize(e);return t&&t[0]&&t[0].handler||null},this.handleRouteChange=function(e){var t=n.getLocation(),r=n.getSwitch(t);"function"==typeof n.props.onChange&&n.props.onChange(!!r,t),n.setState({visibleSwitch:r})},this.defaultSwitch=e.defaultHandler?h["default"].createElement(e.defaultHandler,e.defaultHandlerProps):null,this.initializeRecognizer(e);var r=this.getLocation(),i=this.getSwitch(r);this.state={visibleSwitch:i}}return i(t,e),o(t,[{key:"componentDidMount",value:function(){this.props.load&&f["default"].addEventListener("load",this.handleRouteChange),this.props.pushState&&f["default"].addEventListener("popstate",this.handleRouteChange),this.props.hashChange&&f["default"].addEventListener("hashchange",this.handleRouteChange)}},{key:"componentWillUnmount",value:function(){this.props.load&&f["default"].removeEventListener("load",this.handleRouteChange),this.props.pushState&&f["default"].removeEventListener("popstate",this.handleRouteChange),this.props.hashChange&&f["default"].removeEventListener("hashchange",this.handleRouteChange)}},{key:"componentWillReceiveProps",value:function(e){this.initializeRecognizer(e);var t=this.getLocation(),n=this.getSwitch(t);this.setState({visibleSwitch:n})}},{key:"render",value:function(){return this.props.wrapper?h["default"].createElement(this.props.wrapper,this.props,this.state.visibleSwitch||this.defaultSwitch):this.state.visibleSwitch||this.defaultSwitch}}],[{key:"displayName",value:"Switcher",enumerable:!0},{key:"propTypes",value:{children:h["default"].PropTypes.oneOfType([h["default"].PropTypes.arrayOf(h["default"].PropTypes.element),h["default"].PropTypes.element]).isRequired,pushState:h["default"].PropTypes.bool,hashChange:h["default"].PropTypes.bool,load:h["default"].PropTypes.bool,defaultHandler:h["default"].PropTypes.func,defaultHandlerProps:h["default"].PropTypes.object,onChange:h["default"].PropTypes.func,wrapper:h["default"].PropTypes.any,location:h["default"].PropTypes.string,baseURL:h["default"].PropTypes.string},enumerable:!0},{key:"defaultProps",value:{pushState:!1,hashChange:!0,load:!0,location:"hash",basePath:""},enumerable:!0}]),t}(u.Component);t["default"]=d,e.exports=t["default"]},function(e,t,n){var r;(function(e){(function(){"use strict";function a(e,t,n){this.path=e,this.matcher=t,this.delegate=n}function i(e){this.routes={},this.children={},this.target=e}function o(e,t,n){return function(r,i){var s=e+r;return i?void i(o(s,t,n)):new a(e+r,t,n)}}function s(e,t,n){for(var r=0,a=0,i=e.length;i>a;a++)r+=e[a].path.length;t=t.substr(r);var o={path:t,handler:n};e.push(o)}function u(e,t,n,r){var a=t.routes;for(var i in a)if(a.hasOwnProperty(i)){var o=e.slice();s(o,i,a[i]),t.children[i]?u(o,t.children[i],n,r):n.call(r,o)}}function h(e){return"[object Array]"===Object.prototype.toString.call(e)}function c(e){this.string=e}function p(e){this.name=e}function l(e){this.name=e}function f(){}function d(e,t,n){"/"===e.charAt(0)&&(e=e.substr(1));for(var r=e.split("/"),a=[],i=0,o=r.length;o>i;i++){var s,u=r[i];(s=u.match(/^:([^\/]+)$/))?(a.push(new p(s[1])),t.push(s[1]),n.dynamics++):(s=u.match(/^\*([^\/]+)$/))?(a.push(new l(s[1])),t.push(s[1]),n.stars++):""===u?a.push(new f):(a.push(new c(u)),n.statics++)}return a}function v(e){this.charSpec=e,this.nextStates=[]}function y(e){return e.sort(function(e,t){if(e.types.stars!==t.types.stars)return e.types.stars-t.types.stars;if(e.types.stars){if(e.types.statics!==t.types.statics)return t.types.statics-e.types.statics;if(e.types.dynamics!==t.types.dynamics)return t.types.dynamics-e.types.dynamics}return e.types.dynamics!==t.types.dynamics?e.types.dynamics-t.types.dynamics:e.types.statics!==t.types.statics?t.types.statics-e.types.statics:0})}function g(e,t){for(var n=[],r=0,a=e.length;a>r;r++){var i=e[r];n=n.concat(i.match(t))}return n}function m(e){this.queryParams=e||{}}function w(e,t,n){for(var r=e.handlers,a=e.regex,i=t.match(a),o=1,s=new m(n),u=0,h=r.length;h>u;u++){for(var c=r[u],p=c.names,l={},f=0,d=p.length;d>f;f++)l[p[f]]=i[o++];s.push({handler:c.handler,params:l,isDynamic:!!p.length})}return s}function b(e,t){return t.eachChar(function(t){e=e.put(t)}),e}function S(e){return e=e.replace(/\+/gm,"%20"),decodeURIComponent(e)}a.prototype={to:function(e,t){var n=this.delegate;if(n&&n.willAddRoute&&(e=n.willAddRoute(this.matcher.target,e)),this.matcher.add(this.path,e),t){if(0===t.length)throw new Error("You must have an argument in the function passed to `to`");this.matcher.addChild(this.path,e,t,this.delegate)}return this}},i.prototype={add:function(e,t){this.routes[e]=t},addChild:function(e,t,n,r){var a=new i(t);this.children[e]=a;var s=o(e,a,r);r&&r.contextEntered&&r.contextEntered(t,s),n(s)}};var x=function(e,t){var n=new i;e(o("",n,this.delegate)),u([],n,function(e){t?t(this,e):this.add(e)},this)},C=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],P=new RegExp("(\\"+C.join("|\\")+")","g");c.prototype={eachChar:function(e){for(var t,n=this.string,r=0,a=n.length;a>r;r++)t=n.charAt(r),e({validChars:t})},regex:function(){return this.string.replace(P,"\\$1")},generate:function(){return this.string}},p.prototype={eachChar:function(e){e({invalidChars:"/",repeat:!0})},regex:function(){return"([^/]+)"},generate:function(e){return e[this.name]}},l.prototype={eachChar:function(e){e({invalidChars:"",repeat:!0})},regex:function(){return"(.+)"},generate:function(e){return e[this.name]}},f.prototype={eachChar:function(){},regex:function(){return""},generate:function(){return""}},v.prototype={get:function(e){for(var t=this.nextStates,n=0,r=t.length;r>n;n++){var a=t[n],i=a.charSpec.validChars===e.validChars;if(i=i&&a.charSpec.invalidChars===e.invalidChars)return a}},put:function(e){var t;return(t=this.get(e))?t:(t=new v(e),this.nextStates.push(t),e.repeat&&t.nextStates.push(t),t)},match:function(e){for(var t,n,r,a=this.nextStates,i=[],o=0,s=a.length;s>o;o++)t=a[o],n=t.charSpec,"undefined"!=typeof(r=n.validChars)?-1!==r.indexOf(e)&&i.push(t):"undefined"!=typeof(r=n.invalidChars)&&-1===r.indexOf(e)&&i.push(t);return i}};var R=Object.create||function(e){function t(){}return t.prototype=e,new t};m.prototype=R({splice:Array.prototype.splice,slice:Array.prototype.slice,push:Array.prototype.push,length:0,queryParams:null});var E=function(){this.rootState=new v,this.names={}};E.prototype={add:function(e,t){for(var n,r=this.rootState,a="^",i={statics:0,dynamics:0,stars:0},o=[],s=[],u=!0,h=0,c=e.length;c>h;h++){var p=e[h],l=[],v=d(p.path,l,i);s=s.concat(v);for(var y=0,g=v.length;g>y;y++){var m=v[y];m instanceof f||(u=!1,r=r.put({validChars:"/"}),a+="/",r=b(r,m),a+=m.regex())}var w={handler:p.handler,names:l};o.push(w)}u&&(r=r.put({validChars:"/"}),a+="/"),r.handlers=o,r.regex=new RegExp(a+"$"),r.types=i,(n=t&&t.as)&&(this.names[n]={segments:s,handlers:o})},handlersFor:function(e){var t=this.names[e],n=[];if(!t)throw new Error("There is no route named "+e);for(var r=0,a=t.handlers.length;a>r;r++)n.push(t.handlers[r]);return n},hasRoute:function(e){return!!this.names[e]},generate:function(e,t){var n=this.names[e],r="";if(!n)throw new Error("There is no route named "+e);for(var a=n.segments,i=0,o=a.length;o>i;i++){var s=a[i];s instanceof f||(r+="/",r+=s.generate(t))}return"/"!==r.charAt(0)&&(r="/"+r),t&&t.queryParams&&(r+=this.generateQueryString(t.queryParams,n.handlers)),r},generateQueryString:function(e,t){var n=[],r=[];for(var a in e)e.hasOwnProperty(a)&&r.push(a);r.sort();for(var i=0,o=r.length;o>i;i++){a=r[i];var s=e[a];if(null!=s){var u=encodeURIComponent(a);if(h(s))for(var c=0,p=s.length;p>c;c++){var l=a+"[]="+encodeURIComponent(s[c]);n.push(l)}else u+="="+encodeURIComponent(s),n.push(u)}}return 0===n.length?"":"?"+n.join("&")},parseQueryString:function(e){for(var t=e.split("&"),n={},r=0;r<t.length;r++){var a,i=t[r].split("="),o=S(i[0]),s=o.length,u=!1;1===i.length?a="true":(s>2&&"[]"===o.slice(s-2)&&(u=!0,o=o.slice(0,s-2),n[o]||(n[o]=[])),a=i[1]?S(i[1]):""),u?n[o].push(a):n[o]=a}return n},recognize:function(e){var t,n,r,a,i=[this.rootState],o={},s=!1;if(a=e.indexOf("?"),-1!==a){var u=e.substr(a+1,e.length);e=e.substr(0,a),o=this.parseQueryString(u)}for(e=decodeURI(e),"/"!==e.charAt(0)&&(e="/"+e),t=e.length,t>1&&"/"===e.charAt(t-1)&&(e=e.substr(0,t-1),s=!0),n=0,r=e.length;r>n&&(i=g(i,e.charAt(n)),i.length);n++);var h=[];for(n=0,r=i.length;r>n;n++)i[n].handlers&&h.push(i[n]);i=y(h);var c=h[0];return c&&c.handlers?(s&&"(.+)$"===c.regex.source.slice(-5)&&(e+="/"),w(c,e,o)):void 0}},E.prototype.map=x,E.VERSION="0.1.5";var O=E;n(3).amd?(r=function(){return O}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))):"undefined"!=typeof e&&e.exports?e.exports=O:"undefined"!=typeof this&&(this.RouteRecognizer=O)}).call(this)}).call(t,n(4)(e))},function(e,t,n){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(t,n,r){t.exports=e},function(e,n,r){e.exports=t}])});