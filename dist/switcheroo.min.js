!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("window"),require("react")):"function"==typeof define&&define.amd?define(["window","react"],e):"object"==typeof exports?exports.switcheroo=e(require("window"),require("react")):t.switcheroo=e(t.window,t.React)}(this,function(t,e){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";e.Switcher=n(1)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e,n){for(var r=!0;r;){s=u=h=void 0,r=!1;var i=t,a=e,o=n,s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var h=s.get;return void 0===h?void 0:h.call(o)}var u=Object.getPrototypeOf(i);if(null===u)return void 0;t=u,e=a,n=o,r=!0}},h=n(6),u=r(h),c=n(2),p=r(c),l=n(5),f=r(l),d=function(t){function e(t){i(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.getLocation=this.getLocation.bind(this),this.handleRouteChange=this.handleRouteChange.bind(this),this.getSwitch=this.getSwitch.bind(this),this.initializeRecognizer=this.initializeRecognizer.bind(this),this.defaultSwitch=t.defaultHandler?u["default"].createElement(t.defaultHandler,t.defaultHandlerProps):null,this.state={visibleSwitch:null},this.initializeRecognizer(t)}return a(e,t),o(e,[{key:"componentDidMount",value:function(){this.props.load&&f["default"].addEventListener("load",this.handleRouteChange),this.props.pushState&&f["default"].addEventListener("popstate",this.handleRouteChange),this.props.hashChange&&f["default"].addEventListener("hashchange",this.handleRouteChange)}},{key:"componentWillUnmount",value:function(){this.props.load&&f["default"].removeEventListener("load",this.handleRouteChange),this.props.pushState&&f["default"].removeEventListener("popstate",this.handleRouteChange),this.props.hashChange&&f["default"].removeEventListener("hashchange",this.handleRouteChange)}},{key:"componentWillReceiveProps",value:function(t){this.initializeRecognizer(t)}},{key:"initializeRecognizer",value:function(t){var e=this;this.recognizer=new p["default"];var n=[].concat(t.children);n.forEach(function(n){e.recognizer.add([{path:""+t.basePath+n.props.path,handler:n.props.handler||n}])});var r=this.getLocation(),i=this.getSwitch(r);this.setState({visibleSwitch:i})}},{key:"getLocation",value:function(){var t=decodeURI(f["default"].location[this.props.location].slice(1).split("?")[0]);return"/"!==t.charAt(0)?"/"+t:t}},{key:"getSwitch",value:function(t){var e=this.recognizer.recognize(t);return e&&e[0]&&e[0].handler}},{key:"handleRouteChange",value:function(t){var e=this.getLocation(),n=this.getSwitch(e);"function"==typeof this.props.onChange&&this.props.onChange(!!n,e),this.setState({visibleSwitch:n})}},{key:"render",value:function(){return this.props.wrapper?u["default"].createElement(this.props.wrapper,this.props,this.state.visibleSwitch||this.defaultSwitch):this.state.visibleSwitch||this.defaultSwitch}}]),e}(h.Component);e["default"]=d,d.displayName="Switcher",d.propTypes={children:u["default"].PropTypes.oneOfType([u["default"].PropTypes.arrayOf(u["default"].PropTypes.element),u["default"].PropTypes.element]).isRequired,pushState:u["default"].PropTypes.bool,hashChange:u["default"].PropTypes.bool,load:u["default"].PropTypes.bool,defaultHandler:u["default"].PropTypes.func,defaultHandlerProps:u["default"].PropTypes.object,onChange:u["default"].PropTypes.func,wrapper:u["default"].PropTypes.any,location:u["default"].PropTypes.string,baseURL:u["default"].PropTypes.string},d.defaultProps={pushState:!1,hashChange:!0,load:!0,location:"hash",basePath:""},t.exports=e["default"]},function(t,e,n){var r;(function(t){(function(){"use strict";function i(t,e,n){this.path=t,this.matcher=e,this.delegate=n}function a(t){this.routes={},this.children={},this.target=t}function o(t,e,n){return function(r,a){var s=t+r;return a?void a(o(s,e,n)):new i(t+r,e,n)}}function s(t,e,n){for(var r=0,i=0,a=t.length;a>i;i++)r+=t[i].path.length;e=e.substr(r);var o={path:e,handler:n};t.push(o)}function h(t,e,n,r){var i=e.routes;for(var a in i)if(i.hasOwnProperty(a)){var o=t.slice();s(o,a,i[a]),e.children[a]?h(o,e.children[a],n,r):n.call(r,o)}}function u(t){return"[object Array]"===Object.prototype.toString.call(t)}function c(t){this.string=t}function p(t){this.name=t}function l(t){this.name=t}function f(){}function d(t,e,n){"/"===t.charAt(0)&&(t=t.substr(1));for(var r=t.split("/"),i=[],a=0,o=r.length;o>a;a++){var s,h=r[a];(s=h.match(/^:([^\/]+)$/))?(i.push(new p(s[1])),e.push(s[1]),n.dynamics++):(s=h.match(/^\*([^\/]+)$/))?(i.push(new l(s[1])),e.push(s[1]),n.stars++):""===h?i.push(new f):(i.push(new c(h)),n.statics++)}return i}function g(t){this.charSpec=t,this.nextStates=[]}function y(t){return t.sort(function(t,e){if(t.types.stars!==e.types.stars)return t.types.stars-e.types.stars;if(t.types.stars){if(t.types.statics!==e.types.statics)return e.types.statics-t.types.statics;if(t.types.dynamics!==e.types.dynamics)return e.types.dynamics-t.types.dynamics}return t.types.dynamics!==e.types.dynamics?t.types.dynamics-e.types.dynamics:t.types.statics!==e.types.statics?e.types.statics-t.types.statics:0})}function v(t,e){for(var n=[],r=0,i=t.length;i>r;r++){var a=t[r];n=n.concat(a.match(e))}return n}function m(t){this.queryParams=t||{}}function w(t,e,n){for(var r=t.handlers,i=t.regex,a=e.match(i),o=1,s=new m(n),h=0,u=r.length;u>h;h++){for(var c=r[h],p=c.names,l={},f=0,d=p.length;d>f;f++)l[p[f]]=a[o++];s.push({handler:c.handler,params:l,isDynamic:!!p.length})}return s}function b(t,e){return e.eachChar(function(e){t=t.put(e)}),t}function C(t){return t=t.replace(/\+/gm,"%20"),decodeURIComponent(t)}i.prototype={to:function(t,e){var n=this.delegate;if(n&&n.willAddRoute&&(t=n.willAddRoute(this.matcher.target,t)),this.matcher.add(this.path,t),e){if(0===e.length)throw new Error("You must have an argument in the function passed to `to`");this.matcher.addChild(this.path,t,e,this.delegate)}return this}},a.prototype={add:function(t,e){this.routes[t]=e},addChild:function(t,e,n,r){var i=new a(e);this.children[t]=i;var s=o(t,i,r);r&&r.contextEntered&&r.contextEntered(e,s),n(s)}};var S=function(t,e){var n=new a;t(o("",n,this.delegate)),h([],n,function(t){e?e(this,t):this.add(t)},this)},x=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],P=new RegExp("(\\"+x.join("|\\")+")","g");c.prototype={eachChar:function(t){for(var e,n=this.string,r=0,i=n.length;i>r;r++)e=n.charAt(r),t({validChars:e})},regex:function(){return this.string.replace(P,"\\$1")},generate:function(){return this.string}},p.prototype={eachChar:function(t){t({invalidChars:"/",repeat:!0})},regex:function(){return"([^/]+)"},generate:function(t){return t[this.name]}},l.prototype={eachChar:function(t){t({invalidChars:"",repeat:!0})},regex:function(){return"(.+)"},generate:function(t){return t[this.name]}},f.prototype={eachChar:function(){},regex:function(){return""},generate:function(){return""}},g.prototype={get:function(t){for(var e=this.nextStates,n=0,r=e.length;r>n;n++){var i=e[n],a=i.charSpec.validChars===t.validChars;if(a=a&&i.charSpec.invalidChars===t.invalidChars)return i}},put:function(t){var e;return(e=this.get(t))?e:(e=new g(t),this.nextStates.push(e),t.repeat&&e.nextStates.push(e),e)},match:function(t){for(var e,n,r,i=this.nextStates,a=[],o=0,s=i.length;s>o;o++)e=i[o],n=e.charSpec,"undefined"!=typeof(r=n.validChars)?-1!==r.indexOf(t)&&a.push(e):"undefined"!=typeof(r=n.invalidChars)&&-1===r.indexOf(t)&&a.push(e);return a}};var R=Object.create||function(t){function e(){}return e.prototype=t,new e};m.prototype=R({splice:Array.prototype.splice,slice:Array.prototype.slice,push:Array.prototype.push,length:0,queryParams:null});var E=function(){this.rootState=new g,this.names={}};E.prototype={add:function(t,e){for(var n,r=this.rootState,i="^",a={statics:0,dynamics:0,stars:0},o=[],s=[],h=!0,u=0,c=t.length;c>u;u++){var p=t[u],l=[],g=d(p.path,l,a);s=s.concat(g);for(var y=0,v=g.length;v>y;y++){var m=g[y];m instanceof f||(h=!1,r=r.put({validChars:"/"}),i+="/",r=b(r,m),i+=m.regex())}var w={handler:p.handler,names:l};o.push(w)}h&&(r=r.put({validChars:"/"}),i+="/"),r.handlers=o,r.regex=new RegExp(i+"$"),r.types=a,(n=e&&e.as)&&(this.names[n]={segments:s,handlers:o})},handlersFor:function(t){var e=this.names[t],n=[];if(!e)throw new Error("There is no route named "+t);for(var r=0,i=e.handlers.length;i>r;r++)n.push(e.handlers[r]);return n},hasRoute:function(t){return!!this.names[t]},generate:function(t,e){var n=this.names[t],r="";if(!n)throw new Error("There is no route named "+t);for(var i=n.segments,a=0,o=i.length;o>a;a++){var s=i[a];s instanceof f||(r+="/",r+=s.generate(e))}return"/"!==r.charAt(0)&&(r="/"+r),e&&e.queryParams&&(r+=this.generateQueryString(e.queryParams,n.handlers)),r},generateQueryString:function(t,e){var n=[],r=[];for(var i in t)t.hasOwnProperty(i)&&r.push(i);r.sort();for(var a=0,o=r.length;o>a;a++){i=r[a];var s=t[i];if(null!=s){var h=encodeURIComponent(i);if(u(s))for(var c=0,p=s.length;p>c;c++){var l=i+"[]="+encodeURIComponent(s[c]);n.push(l)}else h+="="+encodeURIComponent(s),n.push(h)}}return 0===n.length?"":"?"+n.join("&")},parseQueryString:function(t){for(var e=t.split("&"),n={},r=0;r<e.length;r++){var i,a=e[r].split("="),o=C(a[0]),s=o.length,h=!1;1===a.length?i="true":(s>2&&"[]"===o.slice(s-2)&&(h=!0,o=o.slice(0,s-2),n[o]||(n[o]=[])),i=a[1]?C(a[1]):""),h?n[o].push(i):n[o]=i}return n},recognize:function(t){var e,n,r,i,a=[this.rootState],o={},s=!1;if(i=t.indexOf("?"),-1!==i){var h=t.substr(i+1,t.length);t=t.substr(0,i),o=this.parseQueryString(h)}for(t=decodeURI(t),"/"!==t.charAt(0)&&(t="/"+t),e=t.length,e>1&&"/"===t.charAt(e-1)&&(t=t.substr(0,e-1),s=!0),n=0,r=t.length;r>n&&(a=v(a,t.charAt(n)),a.length);n++);var u=[];for(n=0,r=a.length;r>n;n++)a[n].handlers&&u.push(a[n]);a=y(u);var c=u[0];return c&&c.handlers?(s&&"(.+)$"===c.regex.source.slice(-5)&&(t+="/"),w(c,t,o)):void 0}},E.prototype.map=S,E.VERSION="0.1.5";var O=E;n(3).amd?(r=function(){return O}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))):"undefined"!=typeof t&&t.exports?t.exports=O:"undefined"!=typeof this&&(this.RouteRecognizer=O)}).call(this)}).call(e,n(4)(t))},function(t,e,n){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,n){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(e,n,r){e.exports=t},function(t,n,r){t.exports=e}])});