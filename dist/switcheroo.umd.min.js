!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("react")):"function"==typeof define&&define.amd?define("switcheroo",["react"],n):e.switcheroo=n(e.React)}(this,function(e){"use strict";function n(e){return function(){return e}}function t(e,n,t,r,o,i,a,u){if(g(n),!e){var c;if(void 0===n)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[t,r,o,i,a,u],p=0;c=new Error(n.replace(/%s/g,function(){return s[p++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}function r(e,n,t,r,o){if("production"!==production)for(var i in e)if(e.hasOwnProperty(i)){var a;try{S("function"==typeof e[i],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",r||"React class",t,i),a=e[i](n,i,r,t,null,T)}catch(e){a=e}if(E(!a||a instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",r||"React class",t,i,typeof a),a instanceof Error&&!(a.message in x)){x[a.message]=!0;var u=o?o():"";E(!1,"Failed %s type: %s%s",t,a.message,null!=u?u:"")}}}function o(e){var n=decodeURI(window.location[e].slice(1).split("?")[0]);return"/"!==n.charAt(0)?"/"+n:n}function i(e){return"/"===e?e:"/"!==e.slice(-1)?e:e.slice(0,-1)}function a(e){return e.replace(/\/:[^\/]+/g,"/([^/]+)")}function u(e){return(e.match(/:[^\/]+/g)||[]).map(function(e){return e.substr(1)})}function c(e,n){return a(i(e+n)+"/?")}function s(e){return new RegExp("^("+e.join("|")+")$")}function p(n,t){var r=t.children,o=t.basePath,a=i(n);return e.Children.toArray(r).filter(function(e){return s([].concat(e.props.path).map(function(e){return c(o,e)})).test(a)})[0]||null}function f(e,n,t){if(!t)return null;var r=i(e);return[].concat(t.props.path).filter(function(e){var t=c(n,e);return new RegExp("^"+t+"$").test(r)})[0]||null}function l(e,n,t){var r={},o=i(e);return t&&[].concat(t.props.path).forEach(function(e){var t=u(n+e),i=c(n,e),a=o.match(new RegExp("^"+i+"$"));a&&(a.shift(),t.forEach(function(e,n){r[e]=a[n]}))}),r}function h(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function d(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function y(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var v="default"in e?e.default:e,m=function(){};m.thatReturns=n,m.thatReturnsFalse=n(!1),m.thatReturnsTrue=n(!0),m.thatReturnsNull=n(null),m.thatReturnsThis=function(){return this},m.thatReturnsArgument=function(e){return e};var b=m,g=function(e){};"production"!==production&&(g=function(e){if(void 0===e)throw new Error("invariant requires an error message argument")});var w=t,O=b;"production"!==production&&function(){var e=function(e){for(var n=arguments.length,t=Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];var o=0,i="Warning: "+e.replace(/%s/g,function(){return t[o++]});"undefined"!=typeof console&&console.error(i);try{throw new Error(i)}catch(e){}};O=function(n,t){if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==t.indexOf("Failed Composite propType: ")&&!n){for(var r=arguments.length,o=Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];e.apply(void 0,[t].concat(o))}}}();var P=O,R="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";if("production"!==production)var S=w,E=P,T=R,x={};var j=r,C=function(e,n){function t(e){var n=e&&(g&&e[g]||e[O]);if("function"==typeof n)return n}function r(e,n){return e===n?0!==e||1/e==1/n:e!==e&&n!==n}function o(e){this.message=e,this.stack=""}function i(e){function t(t,a,u,c,s,p,f){if(c=c||S,p=p||u,f!==R)if(n)w(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if("production"!==production&&"undefined"!=typeof console){var l=c+":"+u;!r[l]&&i<3&&(P(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",p,c),r[l]=!0,i++)}return null==a[u]?t?new o(null===a[u]?"The "+s+" `"+p+"` is marked as required in `"+c+"`, but its value is `null`.":"The "+s+" `"+p+"` is marked as required in `"+c+"`, but its value is `undefined`."):null:e(a,u,c,s,p)}if("production"!==production)var r={},i=0;var a=t.bind(null,!1);return a.isRequired=t.bind(null,!0),a}function a(e){function n(n,t,r,i,a,u){var c=n[t];if(y(c)!==e)return new o("Invalid "+i+" `"+a+"` of type `"+v(c)+"` supplied to `"+r+"`, expected `"+e+"`.");return null}return i(n)}function u(e){function n(n,t,r,i,a){if("function"!=typeof e)return new o("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var u=n[t];if(!Array.isArray(u)){return new o("Invalid "+i+" `"+a+"` of type `"+y(u)+"` supplied to `"+r+"`, expected an array.")}for(var c=0;c<u.length;c++){var s=e(u,c,r,i,a+"["+c+"]",R);if(s instanceof Error)return s}return null}return i(n)}function c(e){function n(n,t,r,i,a){if(!(n[t]instanceof e)){var u=e.name||S;return new o("Invalid "+i+" `"+a+"` of type `"+m(n[t])+"` supplied to `"+r+"`, expected instance of `"+u+"`.")}return null}return i(n)}function s(e){function n(n,t,i,a,u){for(var c=n[t],s=0;s<e.length;s++)if(r(c,e[s]))return null;return new o("Invalid "+a+" `"+u+"` of value `"+c+"` supplied to `"+i+"`, expected one of "+JSON.stringify(e)+".")}return Array.isArray(e)?i(n):("production"!==production&&P(!1,"Invalid argument supplied to oneOf, expected an instance of array."),b.thatReturnsNull)}function p(e){function n(n,t,r,i,a){if("function"!=typeof e)return new o("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var u=n[t],c=y(u);if("object"!==c)return new o("Invalid "+i+" `"+a+"` of type `"+c+"` supplied to `"+r+"`, expected an object.");for(var s in u)if(u.hasOwnProperty(s)){var p=e(u,s,r,i,a+"."+s,R);if(p instanceof Error)return p}return null}return i(n)}function f(e){function n(n,t,r,i,a){for(var u=0;u<e.length;u++){if(null==(0,e[u])(n,t,r,i,a,R))return null}return new o("Invalid "+i+" `"+a+"` supplied to `"+r+"`.")}return Array.isArray(e)?i(n):("production"!==production&&P(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),b.thatReturnsNull)}function l(e){function n(n,t,r,i,a){var u=n[t],c=y(u);if("object"!==c)return new o("Invalid "+i+" `"+a+"` of type `"+c+"` supplied to `"+r+"`, expected `object`.");for(var s in e){var p=e[s];if(p){var f=p(u,s,r,i,a+"."+s,R);if(f)return f}}return null}return i(n)}function h(n){switch(typeof n){case"number":case"string":case"undefined":return!0;case"boolean":return!n;case"object":if(Array.isArray(n))return n.every(h);if(null===n||e(n))return!0;var r=t(n);if(!r)return!1;var o,i=r.call(n);if(r!==n.entries){for(;!(o=i.next()).done;)if(!h(o.value))return!1}else for(;!(o=i.next()).done;){var a=o.value;if(a&&!h(a[1]))return!1}return!0;default:return!1}}function d(e,n){return"symbol"===e||("Symbol"===n["@@toStringTag"]||"function"==typeof Symbol&&n instanceof Symbol)}function y(e){var n=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":d(n,e)?"symbol":n}function v(e){var n=y(e);if("object"===n){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return n}function m(e){return e.constructor&&e.constructor.name?e.constructor.name:S}var g="function"==typeof Symbol&&Symbol.iterator,O="@@iterator",S="<<anonymous>>",E={array:a("array"),bool:a("boolean"),func:a("function"),number:a("number"),object:a("object"),string:a("string"),symbol:a("symbol"),any:function(){return i(b.thatReturnsNull)}(),arrayOf:u,element:function(){function n(n,t,r,i,a){var u=n[t];if(!e(u)){return new o("Invalid "+i+" `"+a+"` of type `"+y(u)+"` supplied to `"+r+"`, expected a single ReactElement.")}return null}return i(n)}(),instanceOf:c,node:function(){function e(e,n,t,r,i){return h(e[n])?null:new o("Invalid "+r+" `"+i+"` supplied to `"+t+"`, expected a ReactNode.")}return i(e)}(),objectOf:p,oneOf:s,oneOfType:f,shape:l};return o.prototype=Error.prototype,E.checkPropTypes=j,E.PropTypes=E,E},k=function(){function e(){w(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function n(){return e}e.isRequired=e;var t={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n};return t.checkPropTypes=b,t.PropTypes=t,t},_=function(e,n){return n={exports:{}},e(n,n.exports),n.exports}(function(e){if("production"!==production){var n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,t=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n};e.exports=C(t,!0)}else e.exports=k()}),A=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},I=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),U=function(e){function n(e){h(this,n);var t=d(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));q.call(t);var r=o(e.location),i=p(r,e),a=f(r,e.basePath,i),u=l(r,e.basePath,i);return t.state={visibleSwitch:i,dynamicValues:u,activePath:a},t}return y(n,e),I(n,[{key:"componentDidMount",value:function(){this.props.load&&window.addEventListener("load",this.handleRouteChange),this.props.pushState&&window.addEventListener("popstate",this.handleRouteChange),this.props.hashChange&&window.addEventListener("hashchange",this.handleRouteChange)}},{key:"componentWillReceiveProps",value:function(e){this.handleSwitchChange(e)}},{key:"shouldComponentUpdate",value:function(e){return!e.preventUpdate()}},{key:"componentWillUnmount",value:function(){this.props.load&&window.removeEventListener("load",this.handleRouteChange),this.props.pushState&&window.removeEventListener("popstate",this.handleRouteChange),this.props.hashChange&&window.removeEventListener("hashchange",this.handleRouteChange)}},{key:"render",value:function(){var e=this.state.visibleSwitch||{},t=e.props,r=this.state.visibleSwitch&&v.cloneElement(this.state.visibleSwitch,A({},t,this.props.mapDynamicSegments(this.state.dynamicValues),{activePath:this.state.activePath}));if(this.props.renderSwitch)return this.props.renderSwitch(r,this.state.dynamicValues,this.state.activePath);if(this.props.wrapper){var o=A({},this.props);return Object.keys(n.propTypes).forEach(function(e){return delete o[e]}),v.createElement(this.props.wrapper,o,r)}return r}}]),n}(e.Component);U.displayName="Switcher",U.propTypes={children:_.oneOfType([_.arrayOf(_.node),_.node]),pushState:_.bool,hashChange:_.bool,load:_.bool,onChange:_.func,wrapper:_.any,location:_.string,basePath:_.string,preventUpdate:_.func,mapDynamicSegments:_.func,renderSwitch:_.func},U.defaultProps={pushState:!1,hashChange:!0,load:!0,location:"hash",basePath:"",preventUpdate:function(){return!1},mapDynamicSegments:function(e){return e}};var q=function(){var e=this;this.handleSwitchChange=function(n){var t=o(n.location),r=p(t,n),i=f(t,n.basePath,r),a=l(t,n.basePath,r);"function"==typeof n.onChange&&n.onChange(!!r,t,a,i),e.setState({visibleSwitch:r,dynamicValues:a,activePath:i})},this.handleRouteChange=function(n){e.handleSwitchChange(e.props)}};return U});
